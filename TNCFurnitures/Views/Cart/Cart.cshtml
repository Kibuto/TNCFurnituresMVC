@using TNCFurnitures.Models
<link rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous">
<link href="~/Styles/not-cart.css" rel="stylesheet" />
@model List<Cart>
@{
    ViewBag.Title = "Cart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 style="text-align:center; padding-top: 12rem; padding-bottom: 3rem; font-size: 4rem;">YOUR CART</h2>
<div class="container">
    @foreach (var item in Model)
    {
        <div class="item row" style="background-color: #fff">
            <div class="col-12 col-md-6 d-flex align-items-center">
                <div class="buttons">
                    <span class="btn btn-danger">
                        <i class="fas fa-times"></i>
                    </span>
                </div>

                <div class="image">
                    <img src="~/Images/@item.sAnhBia" alt="" />
                </div>

                <div class="description">
                    <span class="font-weight-bold">@item.sTenNT</span>
                </div>
            </div>
            
            <div class="col-6 col-md-3 d-flex align-items-center">
                <div class="quantity">
                    <button class="plus-btn" type="button" name="button">
                        <i class="fas fa-minus"></i>

                    </button>
                    <input type="text" name="name" value="@item.iSoLuong">
                    <button class="minus-btn" type="button" name="button">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            
            <div class="total-price col-6 col-md-3 d-flex align-items-center">
                <p style="font-size:1.9rem;" class="font-weight-bold m-0">@item.dThanhTien VNĐ</p>
            </div>
        </div>
    }
</div>

<div class="container d-flex justify-content-center justify-content-lg-end">
    <div class="totals pt-5 pb-5">
        <div class="totals-item d-flex justify-content-between ml-5 mr-5">
            <label>Subtotal:</label>
            <div class="totals-value" id="cart-subtotal">71.97</div>
        </div>
        <div class="totals-item d-flex justify-content-between ml-5 mr-5 mt-3">
            <label>Shipping:</label>
            <div class="totals-value" id="cart-shipping">15.000 VNĐ</div>
        </div>
        <div class="totals-item totals-item-total d-flex justify-content-between ml-5 mr-5 mt-3">
            <label>Total:</label>
            <div class="totals-value" id="cart-total">90.57</div>
        </div>
        <div class="d-flex justify-content-around">
            <a href="@Url.Action("RemoveAll", "Cart")"
               class="btn btn-danger text-uppercase font-weight-bold mt-4" style="padding: 1rem 3rem; font-size: 1.5rem; border-radius:10px;">
                Delete All
            </a><a href="@Url.Action("Order", "Cart")"
               class="btn btn-success text-uppercase font-weight-bold mt-4" style="padding: 1rem 3rem; font-size: 1.5rem; border-radius:10px;">
                Check Out
            </a>
        </div>
        
    </div>
</div>

@*<table align="center" border="1">
    <tr style="text-align:center; font-weight:bold; height: 5rem;">
        <td>Name</td>
        <td>Image</td>
        <td>Quantities</td>
        <td>Price</td>
        <td>Subtotal</td>
        <td width:"50px"></td>
        <td width:"50px"></td>
        <td width:"50px"></td>
    </tr>
    @foreach (var item in Model)
    {*@
@*<tr style="text-align:center; font-weight:bold">
        <td>@item.sTenNT</td>
        <td><img src="~/Images/@item.sAnhBia" style="height: 18rem; width: 18rem" /></td>
        @using (Html.BeginForm("UpdateTheCart", "Cart", new { @iMaSP = item.iMaNT }))
        {
            <td>
                <input type="number" min="1" name="txtSoluong" value="@item.iSoLuong" style="background-color:yellow" />
            </td>
            <td>@String.Format("{0:0,0}", item.dDonGia)</td>
            <td>@String.Format("{0:0,0}", item.dThanhTien)</td>
            <td><a href="@Url.Action("Details", "FurnitureStore", new { id = item.iMaNT })">Chi tiết</a></td>
            <td>@Html.ActionLink("Xóa", "DeleteTheCart", new { @iMaSp = item.iMaNT })</td>
            <td>
                <input type="submit" value="Cập nhật" />
            </td>
        }
    </tr>*@
    }
@*<tr style="font-weight:bold; text-align:right; color:red">
            <td colspan="4">Số lượng: @ViewBag.Tongsoluong</td>
            <td colspan="5">Tổng tiền: @String.Format("{0:0,0}", ViewBag.Tongtien) VNĐ</td>
        </tr>
        <tr style="font-weight:bold; color:blue; text-align:right">
            <td colspan="9">
                @Html.ActionLink("Xóa Giỏ Hàng", "RemoveAll")
            </td>
        </tr>
        <tr style="font-weight:bold; color:blue; text-align:right">
            <td colspan="9">
                @Html.ActionLink("Đặt Hàng", "Order", "Cart")
            </td>
        </tr>
    </table>*@

<script>
    $('.like-btn').on('click', function () {
        $(this).toggleClass('is-active');
    });

    $('.minus-btn').on('click', function (e) {
        e.preventDefault();
        var $this = $(this);
        var $input = $this.closest('div').find('input');
        var value = parseInt($input.val());

        if (value & amp; gt; 1) {
        value = value - 1;
    } else {
        value = 0;
    }

    $input.val(value);

});

    $('.plus-btn').on('click', function (e) {
        e.preventDefault();
        var $this = $(this);
        var $input = $this.closest('div').find('input');
        var value = parseInt($input.val());

        if (value & amp; lt; 100) {
        value = value + 1;
    } else {
        value = 100;
    }

    $input.val(value);
});
</script>

